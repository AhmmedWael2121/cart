import{a as M}from"./chunk-AWTJN3SG.js";import{a as q,b as x,c as j,d as k,e as L,f as P,h as H,i as z,j as A,m as Z}from"./chunk-ESF2JMTS.js";import{l as N,t as D}from"./chunk-PYZ6ZTU3.js";import"./chunk-Q32ZED55.js";import{$ as g,Ab as V,Bb as G,Gb as l,Hb as _,Ib as w,Ka as n,Mb as C,Nb as h,Ob as S,S as B,Ua as I,Ub as d,Vb as s,Z as b,_ as y,_a as m,aa as v,fb as E,kb as p,nb as i,ob as o,pb as c,tb as F,wb as T,xb as u}from"./chunk-BWAXOIWL.js";import"./chunk-EQDQRRRY.js";function $(e,a){e&1&&(i(0,"li",17),l(1),d(2,"translate"),o()),e&2&&(n(),_(s(2,1,"errors.email1")))}function U(e,a){e&1&&(i(0,"li",17),l(1),d(2,"translate"),o()),e&2&&(n(),_(s(2,1,"errors.email2")))}function J(e,a){if(e&1&&(i(0,"div",9),g(),i(1,"svg",13),c(2,"path",14),o(),v(),i(3,"span",15),l(4,"Danger"),o(),i(5,"div")(6,"ul",16),m(7,$,3,3,"li",17)(8,U,3,3,"li",17),o()()()),e&2){u();let t=S(2);n(7),p(t!=null&&t.getError("required")?7:t!=null&&t.getError("email")?8:-1)}}function K(e,a){e&1&&c(0,"i",12)}function O(e,a){if(e&1){let t=F();i(0,"form",5),T("ngSubmit",function(){b(t);let f=u();return y(f.vertifyEmailSumit())}),i(1,"div",6),C(2),i(3,"label",7),l(4),d(5,"translate"),o(),c(6,"input",8),d(7,"translate"),m(8,J,9,1,"div",9),o(),i(9,"div",10)(10,"button",11),m(11,K,1,0,"i",12),l(12),d(13,"translate"),o()()()}if(e&2){let t=u();E("formGroup",t.vertifyEmail),n(2);let r=h(t.vertifyEmail.get("email"));n(2),w(" ",s(5,8,"forgetPassword.email"),""),n(2),G("placeholder"," ",s(7,10,"forgetPassword.emailPlaceholder"),""),n(2),p(r!=null&&r.errors&&(r!=null&&r.touched)?8:-1),n(3),p(t.isLoading?11:-1),n(),w(" ",s(13,12,"forgetPassword.sendBtn")," ")}}function Q(e,a){e&1&&(i(0,"li",17),l(1),d(2,"translate"),o()),e&2&&(n(),_(s(2,1,"errors.code")))}function W(e,a){e&1&&(i(0,"li",17),l(1),d(2,"translate"),o()),e&2&&(n(),_(s(2,1,"errors.codeValid")))}function X(e,a){if(e&1&&(i(0,"div",9),g(),i(1,"svg",13),c(2,"path",14),o(),v(),i(3,"span",15),l(4,"Danger"),o(),i(5,"div")(6,"ul",16),m(7,Q,3,3,"li",17)(8,W,3,3,"li",17),o()()()),e&2){u();let t=S(2);n(7),p(t!=null&&t.getError("required")?7:t!=null&&t.getError("pattern")?8:-1)}}function Y(e,a){e&1&&c(0,"i",12)}function ee(e,a){if(e&1){let t=F();i(0,"form",18),T("ngSubmit",function(){b(t);let f=u();return y(f.vertifyCodeSumit())}),i(1,"div",6),C(2),i(3,"label",19),l(4),d(5,"translate"),o(),c(6,"input",20),d(7,"translate"),m(8,X,9,1,"div",9),o(),i(9,"div",10)(10,"button",11),m(11,Y,1,0,"i",12),l(12),d(13,"translate"),o()()()}if(e&2){let t=u();E("formGroup",t.vertifyCode),n(2);let r=h(t.vertifyCode.get("resetCode"));n(2),_(s(5,7,"forgetPassword.code")),n(2),V("placeholder",s(7,9,"forgetPassword.codePlaceholder")),n(2),p(r!=null&&r.errors&&(r!=null&&r.touched)?8:-1),n(3),p(t.isLoading?11:-1),n(),w(" ",s(13,11,"forgetPassword.sendBtn")," ")}}function te(e,a){e&1&&(i(0,"li",17),l(1,"Email is required"),o())}function ie(e,a){e&1&&(i(0,"li",17),l(1,"Invalid email address"),o())}function ne(e,a){if(e&1&&(i(0,"div",9),g(),i(1,"svg",13),c(2,"path",14),o(),v(),i(3,"span",15),l(4,"Danger"),o(),i(5,"div")(6,"ul",16),m(7,te,2,0,"li",17)(8,ie,2,0,"li",17),o()()()),e&2){u();let t=S(2);n(7),p(t!=null&&t.getError("required")?7:t!=null&&t.getError("email")?8:-1)}}function oe(e,a){e&1&&(i(0,"li",17),l(1),d(2,"translate"),o()),e&2&&(n(),_(s(2,1,"forgetPassword.password")))}function ae(e,a){e&1&&(i(0,"li"),l(1),d(2,"translate"),o()),e&2&&(n(),w(" ",s(2,1,"forgetPassword.passwordValidation")," "))}function re(e,a){if(e&1&&(i(0,"div",9),g(),i(1,"svg",13),c(2,"path",14),o(),v(),i(3,"span",15),l(4,"Danger"),o(),i(5,"div")(6,"ul",16),m(7,oe,3,3,"li",17)(8,ae,3,3,"li"),o()()()),e&2){u();let t=S(10);n(7),p(t!=null&&t.getError("required")?7:t!=null&&t.getError("pattern")?8:-1)}}function le(e,a){e&1&&c(0,"i",12)}function de(e,a){if(e&1){let t=F();i(0,"form",21),T("ngSubmit",function(){b(t);let f=u();return y(f.NewPassordSumit())}),i(1,"div",6),C(2),i(3,"label",7),l(4),d(5,"translate"),o(),c(6,"input",22),d(7,"translate"),m(8,ne,9,1,"div",9),o(),i(9,"div",6),C(10),i(11,"label",23),l(12),d(13,"translate"),o(),c(14,"input",24),d(15,"translate"),m(16,re,9,1,"div",9),o(),i(17,"div",10)(18,"button",11),m(19,le,1,0,"i",12),l(20),d(21,"translate"),o()()()}if(e&2){let t=u();E("formGroup",t.resetPassword),n(2);let r=h(t.vertifyEmail.get("email"));n(2),_(s(5,10,"forgetPassword.email")),n(2),V("placeholder",s(7,12,"forgetPassword.emailPlaceholder")),n(2),p(r!=null&&r.errors&&(r!=null&&r.touched)?8:-1),n(2);let f=h(t.resetPassword.get("newPassword"));n(2),_(s(13,15,"forgetPassword.NewPassword")),n(2),V("placeholder",s(15,17,"forgetPassword.VerifyNewPasswordPlaceholder")),n(2),p(f!=null&&f.errors&&(f!=null&&f.touched)?16:-1),n(3),p(t.isLoading?19:-1),n(),w(" ",s(21,19,"forgetPassword.sendBtn")," ")}}var R=class e{isLoading=!1;_authService=B(M);_router=B(N);isVertify=!1;steps=1;vertifyEmail=new L({email:new P(null,[x.required,x.email])});vertifyCode=new L({resetCode:new P(null,[x.required,x.pattern(/^\w{6}$/)])});resetPassword=new L({email:new P(null,[x.required,x.email]),newPassword:new P(null,[x.required,x.pattern(/^[A-Z]\w{7,}$/)])});vertifyEmailSumit(){this._authService.VerifyEmailSubmit(this.vertifyEmail.value).subscribe({next:a=>{this.resetPassword.get("email")?.patchValue(this.vertifyEmail.get("email")?.value),this.isVertify=!0,a.statusMsg==="success"&&(this.isLoading=!0,this.steps=2,this.isVertify=!1),this.isLoading=!1}})}vertifyCodeSumit(){this._authService.VerifyCodeSubmit(this.vertifyCode.value).subscribe({next:a=>{this.isVertify=!0,a.status==="Success"&&(this.isLoading=!0,this.steps=3,this.isVertify=!1),this.isLoading=!1}})}NewPassordSumit(){this._authService.RePassordSubmit(this.resetPassword.value).subscribe({next:a=>{this.isLoading=!0,setTimeout(()=>{localStorage.setItem("token",a.token),this._authService.getUserData(),this._router.navigate(["/home"]),this.isLoading=!1},1500)}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=I({type:e,selectors:[["app-forget-password"]],decls:7,vars:4,consts:[[1,"w-2/3","mx-auto"],[1,"font-medium","text-violet-900","text-center","text-3xl","capitalize"],["id","emails",1,"mx-auto","flex","w-2/3","flex-col","pt-3","justify-center","my-10","shadow-md","border","bg-slate-50","rounded-2xl",3,"formGroup"],["id","codes",1,"mx-auto","flex","w-2/3","flex-col","pt-3","justify-center","my-10","shadow-md","border","bg-slate-50","rounded-2xl",3,"formGroup"],["id","resetPassword",1,"mx-auto","flex","w-2/3","flex-col","pt-3","justify-center","my-10","shadow-md","border","bg-slate-50","rounded-2xl",3,"formGroup"],["id","emails",1,"mx-auto","flex","w-2/3","flex-col","pt-3","justify-center","my-10","shadow-md","border","bg-slate-50","rounded-2xl",3,"ngSubmit","formGroup"],[1,"rounded-md","px-5","py-4"],["for","email",1,"mb-2","capitalize","text-lg","font-medium","text-black"],["type","email","id","email","formControlName","email",1,"border-b-2","shadow-sm","shadow-violet-300","text-violet-950","font-medium","placeholder-opacity-50","placeholder-violet-950","text-sm","rounded-lg","w-full","p-2.5",3,"placeholder"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],[1,"flex","justify-end","items-center","my-auto","gap-4"],["type","submit",1,"bg-violet-700","rounded-full","px-5","py-3","mb-6","m-auto","font-medium","text-center","text-white"],[1,"fas","fa-spin","fa-spinner"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","lineSpaces","list-disc","list-inside"],[1,"text-sm","lineSpaces"],["id","codes",1,"mx-auto","flex","w-2/3","flex-col","pt-3","justify-center","my-10","shadow-md","border","bg-slate-50","rounded-2xl",3,"ngSubmit","formGroup"],["for","code",1,"mb-2","capitalize","text-lg","font-medium","text-black"],["type","text","id","code","formControlName","resetCode",1,"border-b-2","shadow-sm","shadow-violet-300","text-violet-950","font-medium","placeholder-opacity-50","placeholder-violet-950","text-sm","rounded-lg","w-full","p-2.5",3,"placeholder"],["id","resetPassword",1,"mx-auto","flex","w-2/3","flex-col","pt-3","justify-center","my-10","shadow-md","border","bg-slate-50","rounded-2xl",3,"ngSubmit","formGroup"],["readonly","","type","email","id","email","formControlName","email",1,"border-b-2","shadow-sm","shadow-violet-300","text-violet-950","font-medium","placeholder-opacity-50","placeholder-violet-950","text-sm","rounded-lg","w-full","p-2.5",3,"placeholder"],["for","newPassword",1,"mb-2","capitalize","text-lg","font-medium","text-black"],["type","password","id","newPassword","formControlName","newPassword",1,"border-b-2","shadow-sm","shadow-violet-300","text-violet-950","font-medium","placeholder-opacity-50","placeholder-violet-950","text-sm","rounded-lg","w-full","p-2.5",3,"placeholder"]],template:function(t,r){t&1&&(i(0,"section",0)(1,"h1",1),l(2),d(3,"translate"),o(),m(4,O,14,14,"form",2)(5,ee,14,13,"form",3)(6,de,22,21,"form",4),o()),t&2&&(n(2),w(" ",s(3,2,"forgetPassword.ForgetPassword")," "),n(2),p(r.steps==1?4:r.steps==2?5:r.steps==3?6:-1))},dependencies:[Z,H,q,j,k,z,A,D],encapsulation:2})};export{R as ForgetPasswordComponent};
