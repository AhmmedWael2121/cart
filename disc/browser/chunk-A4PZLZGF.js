import{a as H,b as C,c as j,d as A,h as $,i as R,j as Z,k as U,m as z}from"./chunk-SFKBTL3D.js";import{f as q}from"./chunk-2RDFWJ3B.js";import{a as M,f as B,i as G}from"./chunk-ETDKGUVP.js";import{$ as x,Db as r,Eb as v,Fb as T,Ja as o,Jb as k,Kb as I,L,Lb as E,Q as N,R as _,Rb as l,Sb as c,Ta as V,Y as P,Z as O,Za as m,_ as y,eb as g,jb as s,mb as e,nb as i,ob as u,sb as D,tb as w,ub as b,xb as S}from"./chunk-TJAOP4CE.js";import"./chunk-EQDQRRRY.js";var F=class t{constructor(n){this._httpClient=n}token=localStorage.getItem("token");PostOnlinePayement(n,a){return this._httpClient.post(`${B.baseUrl}/api/v1/orders/checkout-session/${n}?url=http://localhost:4200`,{shippingAddress:a})}PostCashPayement(n,a){return this._httpClient.post(`${B.baseUrl}/api/v1/orders/${n}`,{shippingAddress:a})}static \u0275fac=function(a){return new(a||t)(N(M))};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})};function Q(t,n){t&1&&(e(0,"li"),r(1,"phone is required"),i())}function W(t,n){t&1&&(e(0,"li"),r(1,"phone number is invalid"),i())}function X(t,n){if(t&1&&(e(0,"div",4),y(),e(1,"svg",12),u(2,"path",13),i(),x(),e(3,"span",14),r(4,"Danger"),i(),e(5,"div")(6,"ul",15),m(7,Q,2,0,"li")(8,W,2,0,"li"),i()()()),t&2){b();let a=E(6);o(7),s(a!=null&&a.getError("required")?7:a!=null&&a.getError("pattern")?8:-1)}}function Y(t,n){t&1&&(e(0,"li"),r(1,"city is required"),i())}function ee(t,n){if(t&1&&(e(0,"div",7),y(),e(1,"svg",12),u(2,"path",13),i(),x(),e(3,"span",14),r(4,"Danger"),i(),e(5,"div")(6,"ul",15),m(7,Y,2,0,"li"),i()()()),t&2){b();let a=E(14);o(7),s(a!=null&&a.getError("required")?7:-1)}}function te(t,n){t&1&&(e(0,"li"),r(1,"details is required"),i())}function ie(t,n){if(t&1&&(e(0,"div",4),y(),e(1,"svg",12),u(2,"path",13),i(),x(),e(3,"span",14),r(4,"Danger"),i(),e(5,"div")(6,"ul",15),m(7,te,2,0,"li"),i()()()),t&2){b();let a=E(22);o(7),s(a!=null&&a.getError("required")?7:-1)}}var J=class t{checkooutForm;_formBuilder=_(U);_paymentService=_(F);_activatedRoute=_(q);CartId="";cart;ngOnInit(){this.initailForm(),this.getCartId()}initailForm(){this.checkooutForm=this._formBuilder.group({details:[null,C.required],phone:[null,[C.required,C.pattern(/^01[0125][0-9]{8}$/)]],city:[null,C.required]})}getCartId(){this._activatedRoute.paramMap.subscribe({next:n=>{this.CartId=n.get("id"),console.log(this.CartId)}})}OnlinePayment(){this._paymentService.PostOnlinePayement(this.CartId,this.checkooutForm.value).subscribe({next:n=>{n.status==="success"&&open(n.session.url,"_self"),console.log(n)}})}cashPayment(){this.checkooutForm.valid?this._paymentService.PostCashPayement(this.CartId,this.checkooutForm.value).subscribe({next:n=>{n.status==="success"&&(this.cart={})}}):console.log("Form is invalid")}static \u0275fac=function(a){return new(a||t)};static \u0275cmp=V({type:t,selectors:[["app-chechout"]],decls:36,vars:36,consts:[[1,"main-sec",3,"formGroup"],[1,"rounded-md","px-5","py-4"],["for","phone",1,"label"],["id","phone","type","tel","formControlName","phone",1,"input-field","form-control","w-[80%]",3,"placeholder"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["for","city",1,"label"],["id","city","type","text","formControlName","city",1,"input-field","form-control","w-[80%]",3,"placeholder"],["role","alert",1,"error-section"],["for","details",1,"label"],["id","details","formControlName","details",1,"input-field","form-control","w-[80%]",3,"placeholder"],[1,"btns","flex","gap-3","my-3","justify-center","items-center"],["type","submit",1,"button","hover:text-white",3,"click","disabled"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"]],template:function(a,p){if(a&1){let d=D();e(0,"section")(1,"h1"),r(2),l(3,"translate"),i(),e(4,"form",0)(5,"div",1),k(6),e(7,"label",2),r(8),l(9,"translate"),i(),u(10,"input",3),l(11,"translate"),m(12,X,9,1,"div",4),i(),e(13,"div",1),k(14),e(15,"label",5),r(16),l(17,"translate"),i(),u(18,"input",6),l(19,"translate"),m(20,ee,8,1,"div",7),i(),e(21,"div",1),k(22),e(23,"label",8),r(24),l(25,"translate"),i(),u(26,"textarea",9),l(27,"translate"),m(28,ie,8,1,"div",4),i(),e(29,"div",10)(30,"button",11),w("click",function(){return P(d),O(p.OnlinePayment())}),r(31),l(32,"translate"),i(),e(33,"button",11),w("click",function(){return P(d),O(p.cashPayment())}),r(34),l(35,"translate"),i()()()()}if(a&2){o(2),v(c(3,15,"checkOut.Checkout")),o(2),g("formGroup",p.checkooutForm),o(2);let d=I(p.checkooutForm.get("phone"));o(2),v(c(9,18,"checkOut.PhoneNumber")),o(2),S("placeholder",c(11,20,"checkOut.PhoneNumberPlaceholder")),o(2),s(d!=null&&d.errors&&(d!=null&&d.touched)?12:-1),o(2);let h=I(p.checkooutForm.get("city"));o(2),v(c(17,23,"checkOut.City")),o(2),S("placeholder",c(19,25,"checkOut.CityPlaceholder")),o(2),s(h!=null&&h.errors&&(h!=null&&h.touched)?20:-1),o(2);let f=I(p.checkooutForm.get("details"));o(2),v(c(25,28,"checkOut.Details")),o(2),S("placeholder",c(27,30,"checkOut.DetailsPlaceholder")),o(2),s(f!=null&&f.errors&&(f!=null&&f.touched)?28:-1),o(2),g("disabled",p.checkooutForm.invalid),o(),T(" ",c(32,32,"checkOut.OnlinePayment")," "),o(2),g("disabled",p.checkooutForm.invalid),o(),T(" ",c(35,34,"checkOut.CashPayment")," ")}},dependencies:[z,$,H,j,A,R,Z,G],encapsulation:2})};export{J as ChechoutComponent};
